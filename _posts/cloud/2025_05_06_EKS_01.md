### Chap 01. 컨테이너 기술 보급과 쿠버네티스
#### 컨테이너란
- 컨테이너와 가상머신의 차이를 이해하자.
- 가상머신
  - 호스트 OS에 하이퍼바이저를 설치하고 그 위에 게스트 OS를 동작 시키는 형태
- 컨테이너
  - 호스트 OS에 컨테이너 런타임을 올리고 으 위에 프로세스로서 컨테이너 동작
  - 호스트 OS의 커널을 공유하면서 분리된 프로세스를 실행해 마치 가상 머신이 움직이는 것처럼 보인다.

#### 도커란
- 도커 특징과 장점
  - 컨테이너 관리 방식
    - Dockerfile이란 정의 파일을 작성하여 컨테이너 이미지를 간단히 만들 수 있다.
    - 이미지에는 애플리케이션과 그 실행 환경 설정이 포함되어 있기 때문에 도커 엔진으로 애플리케이션 동작을 보장할 수 있다. 
  - 컨테이너 이미지 저장, 공유하기 위한 에코시스템
    - 도커 허브란 컨테이너 레포지토리가 제공하여 이미지를 서비스 환경에 안정적으로 배포할 수 있다.
#### 쿠버네티스란
- 서버를 여러 대 실행하고 그 위에 가상 오케스트레이션 계층을 구축하여 컨테이너가 동작할 수 있도록 한다.
  - SPOF를 배제할 수 있는 장점
- 컨테이너 운영에 대한 관리 장점
- 기본 오브젝트
  - 파드
    - 쿠버네티스의 최소 단위로 파드에서는 하나 이상의 컨테이너를 동작시킬 수 있으며 어떤 이미지를 사용할지 등을 설정한다.
  - 레플리카셋
    - 동작할 파드의 개수를 설정할 수 있다.
  - 디플로이먼트
    - 배포 이력 관리
    - 새로운 버전에 대해 릴리스하거나 부하에 따른 레플리카 수 변경 등을 관리할 수 있다.
  - 서비스
    - 배포한 파드를 쿠버네티스 클러스터 외부에 공개하기 위한 구조를 제공

#### Amazon EKS란
- 쿠버네티스를 제어하는 컨트롤 플레인을 제공하는 관리형 서비스
- 컨트롤 플레인틔 유지 및 운영을 AWS에서 대신해준다.
- EKS 특징
  - VPC와 통합
    - 일반적으로 쿠버네티스 클러스터에서는 파드 네트워크로 데이터 플레인 네트워크와 다른 자체 네트워크 체계를 배치한다.
      - 클러스터 외부에서 파드에 명시적으로 엔드포인트를 생성하지 않으면 통신이 불가능하다
    - EKS에서는 Amazon VPC 통합 네트워킹을 지원하여 파드에서 VPC 내부 주소 대역을 사용하여 클러스터 외부와 통신아게 구현할 수 있다.
  - IAM을 통한 인증과 인가
    - kubectl 이라는 command line을 통해 조작하게되어 해당 조작에 대해 올바른 인증 및 인가 구조 필요
    - IAM 사용자, 역할을 사용하여 클러스터의 인증 및 인가를 할 수 있다.
  - ELB와의 연계
    - 외부에서 접속할 때는 서비스를 사용하여 엔드포인트를 생성해야 하는데 가장 전형적인 엔드포인트가 로드밸런서이다.
    - 로드밸런서를 하면 AWS에선 자동으로 ELB가 생성되고 HTTPS, 경로 기반 라우팅 등의 L7 로드밸런서 기능을 제공
  - 데이터 플레인 선택
    - 컨트롤 플레인은 EKS에서 관리형 서비스로 제공하고 있고 데이터플레인 관리는 계속해서 추가되고 있는 상황
    - 필요한 가상 머신 설정을 쉽게해주는 관리형 노드그룹부터 처음부터 가상머신을 의식하지 않고 파드를 배포할 수 있는 파게이트란 서비스가 있다.

#### 출처
- 클라우드 네이티브를 위한 쿠버네티스 실전 프로젝트
